---
import layout from "@/layouts/Layout.astro";
// Pendaftaran.astro - Ultimate Education Registration Form
const title = "Form Pendaftaran Siswa - Ultimate Education";
---

<layout>
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>{title}</title>
            <!-- Load Supabase bundled from CDN -->
            <script is:inline src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
            <div class="container">
                <div class="form-header">
                    <!-- Language Toggle (flag switch) -->
                    <div style="display:flex; justify-content:flex-end; margin-bottom:10px;">
                        <svg style="display:none;">
                            <symbol id="flag-id" viewBox="0 0 512 512">
                                <g fill-rule="nonzero">
                                    <path
                                        fill="#4D4D4D"
                                        d="M256 0c70.683 0 134.689 28.664 181.013 74.987C483.336 121.311 512 185.316 512 256c0 70.683-28.664 134.689-74.987 181.013C390.689 483.336 326.683 512 256 512c-70.676 0-134.689-28.664-181.013-74.987C28.664 390.689 0 326.676 0 256c0-70.684 28.664-134.689 74.987-181.013C121.311 28.664 185.316 0 256 0z"
                                    ></path>
                                    <path
                                        fill="#fff"
                                        d="M256.001 19.597c65.278 0 124.383 26.465 167.162 69.242 42.777 42.779 69.243 101.885 69.243 167.162 0 65.278-26.466 124.383-69.246 167.159-42.776 42.78-101.881 69.246-167.159 69.246-65.278 0-124.383-26.466-167.162-69.243-42.777-42.779-69.242-101.884-69.242-167.162 0-65.277 26.465-124.383 69.242-167.162 42.779-42.777 101.884-69.242 167.162-69.242z"
                                    ></path>
                                    <path fill="#fff" d="M256.001 39.6c119.514 0 216.401 96.887 216.401 216.401 0 119.514-96.887 216.401-216.401 216.401-119.514 0-216.401-96.887-216.401-216.401C39.6 136.487 136.487 39.6 256.001 39.6z"
                                    ></path>
                                    <path fill="#CE1126" d="M472.402 256H39.6c.001-119.514 96.887-216.4 216.401-216.4 119.514 0 216.4 96.886 216.401 216.4z"></path>
                                </g>
                            </symbol>
                            <symbol id="flag-en" viewBox="0 0 512 512">
                                <g fill-rule="nonzero">
                                    <path
                                        fill="#999"
                                        d="M256 0c70.68 0 134.69 28.66 181.01 74.99C483.34 121.31 512 185.32 512 256c0 70.68-28.66 134.69-74.99 181.01C390.69 483.34 326.68 512 256 512c-70.68 0-134.69-28.66-181.01-74.99C28.66 390.69 0 326.68 0 256c0-70.68 28.66-134.69 74.99-181.01C121.31 28.66 185.32 0 256 0z"
                                    ></path>
                                    <path
                                        fill="#fff"
                                        d="M256 19.48c65.3 0 124.46 26.48 167.25 69.27l1.09 1.18c42.14 42.71 68.18 101.37 68.18 166.06 0 65.31-26.5 124.46-69.29 167.25l-1.18 1.09c-42.73 42.16-101.4 68.19-166.05 68.19-65.23 0-124.37-26.51-167.18-69.33-42.84-42.74-69.33-101.89-69.33-167.2 0-65.31 26.48-124.45 69.27-167.24C131.55 45.96 190.7 19.48 256 19.48z"
                                    ></path>
                                    <path fill="#FEFEFE" d="M256 39.59c119.52 0 216.41 96.89 216.41 216.4 0 119.52-96.89 216.42-216.41 216.42-119.51 0-216.4-96.9-216.4-216.42 0-119.51 96.89-216.4 216.4-216.4z"></path>
                                    <path
                                        fill="#012169"
                                        d="M183.49 179.55V52.05c-41.32 14.7-76.85 41.61-102.27 76.35l102.27 51.15zm0 152.9v127.5c-41.3-14.7-76.82-41.59-102.26-76.35l102.26-51.15zm144.55 0v127.67c41.45-14.63 77.09-41.54 102.61-76.34l-102.61-51.33zm0-152.9V51.88c41.45 14.63 77.11 41.54 102.62 76.35l-102.62 51.32z"
                                    ></path>
                                    <path
                                        fill="#C8102E"
                                        d="M448.3 328.16h-48.11l49.35 24.72c3.21-6.41 6.11-13 8.69-19.75l-9.93-4.97zm-9.34-187.76-86.42 43.33h48.11l48.95-24.5c-3.23-6.46-6.79-12.75-10.64-18.83zM212.41 299.26v168.75c14.08 2.87 28.66 4.4 43.59 4.4 14.76 0 29.19-1.49 43.13-4.3V299.26h168.94c2.83-13.98 4.34-28.44 4.34-43.27 0-14.88-1.51-29.42-4.37-43.47H299.13V43.9A217.404 217.404 0 0 0 256 39.59c-14.93 0-29.51 1.54-43.59 4.4v168.53H43.97a217.777 217.777 0 0 0-4.37 43.47c0 14.83 1.51 29.29 4.34 43.27h168.47zM63.12 183.84h48.11l-48.89-24.48c-3.2 6.41-6.11 13.02-8.68 19.76l9.46 4.72zm95.87 144.43h-48.11l-48.57 24.31A216.76 216.76 0 0 0 73 371.52l86.43-43.25h-.44z"
                                    ></path>
                                </g>
                            </symbol>
                        </svg>
                        <div class="toggle" style="align-items:center;">
                            <input id="lang-switch" type="checkbox" />
                            <label for="lang-switch">
                                <svg class="flag left" viewBox="0 0 512 512" aria-hidden="true"><use href="#flag-id"></use></svg>
                                <svg class="flag right" viewBox="0 0 512 512" aria-hidden="true"><use href="#flag-en"></use></svg>
                            </label>
                        </div>
                    </div>
                    <h1 id="form-title">Formulir Pendaftaran</h1>
                </div>

                <div class="form-body">
                    <div class="progress-bar">
                        <div class="progress-step active" data-step="1">
                            <div class="progress-circle">1</div>
                            <div class="progress-label">Dasar</div>
                        </div>
                        <div class="progress-step" data-step="2">
                            <div class="progress-circle">2</div>
                            <div class="progress-label">Pekerjaan</div>
                        </div>
                        <div class="progress-step" data-step="3">
                            <div class="progress-circle">3</div>
                            <div class="progress-label">Tujuan</div>
                        </div>
                        <div class="progress-step" data-step="4">
                            <div class="progress-circle">4</div>
                            <div class="progress-label">Studi/Kerja</div>
                        </div>
                        <div class="progress-step" data-step="5">
                            <div class="progress-circle">5</div>
                            <div class="progress-label">Preferensi</div>
                        </div>
                        <div class="progress-step" data-step="6">
                            <div class="progress-circle">6</div>
                            <div class="progress-label">Pembayaran</div>
                        </div>
                    </div>

                    <div class="message" id="message"></div>
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>Menyimpan data...</p>
                    </div>

                    <form id="studentForm">
                        <!-- SECTION 1: INFORMASI DASAR SISWA -->
                        <div class="form-section active" data-section="1">
                            <h2 class="section-title">Informasi Dasar</h2>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-nama">Nama Lengkap <span class="required">*</span></label>
                                    <input id="input-nama" type="text" name="nama" required />
                                </div>
                                <div class="form-group">
                                    <label id="label-email">Email Aktif <span class="required">*</span></label>
                                    <input id="input-email" type="email" name="email" required />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-nohp">No. WhatsApp <span class="required">*</span></label>
                                    <input id="input-nohp" type="tel" name="no_hp" placeholder="628xxxxxxxxxx" required />
                                </div>
                                <div class="form-group">
                                    <label id="label-jk">Jenis Kelamin <span class="required">*</span></label>
                                    <select id="jenis_kelamin" name="jenis_kelamin" required>
                                        <option value="">-- Pilih --</option>
                                        <option value="Laki-laki">Laki-laki</option>
                                        <option value="Perempuan">Perempuan</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-negara">Negara <span class="required">*</span></label>
                                    <select name="negara" id="negara_select" required>
                                        <option value="Indonesia" selected>Indonesia</option>
                                        <option value="United States">United States</option>
                                        <option value="United Kingdom">United Kingdom</option>
                                        <option value="Australia">Australia</option>
                                        <option value="Canada">Canada</option>
                                        <option value="Singapore">Singapore</option>
                                        <option value="Malaysia">Malaysia</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label id="label-provinsi">Provinsi <span class="required">*</span></label>
                                    <select name="provinsi" id="provinsi_select" required>
                                        <option value="">-- Pilih Provinsi --</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-kabupaten">Kabupaten/Kota <span class="required">*</span></label>
                                    <select name="kota" id="kota_select" required>
                                        <option value="">-- Pilih Kabupaten/Kota --</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label id="label-kecamatan">Kecamatan <span class="required">*</span></label>
                                    <select name="kecamatan" id="kecamatan_select" required>
                                        <option value="">-- Pilih Kecamatan --</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-kelurahan">Kelurahan/Desa <span class="required">*</span></label>
                                    <select name="kelurahan" id="kelurahan_select" required>
                                        <option value="">-- Pilih Kelurahan/Desa --</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label id="label-tgllahir">Tanggal Lahir <span class="required">*</span></label>
                                    <input id="input-tgllahir" type="date" name="tanggal_lahir" required />
                                </div>
                            </div>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-alamat">Alamat Lengkap <span class="required">*</span></label>
                                    <textarea name="alamat" id="alamat_textarea" required placeholder="Jln... No..., RT/RW, dll"></textarea>
                                    <small id="alamat_help" style="color: #666; font-size: 12px;">Untuk negara selain Indonesia, tulis alamat lengkap di sini.</small>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-kontakdarurat">Nama Kontak Darurat <span class="required">*</span></label>
                                    <input id="input-kontakdarurat" type="text" name="nama_kontak_darurat" required />
                                </div>
                                <div class="form-group">
                                    <label id="label-nokontakdarurat">No. Kontak Darurat <span class="required">*</span></label>
                                    <input id="input-nokontakdarurat" type="tel" name="kontak_darurat" required />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-status">Status Saat Ini <span class="required">*</span></label>
                                    <select id="status" name="status" required>
                                        <option value="">-- Pilih --</option>
                                        <option value="Pelajar SMA">Pelajar SMA</option>
                                        <option value="Mahasiswa">Mahasiswa</option>
                                        <option value="Fresh Graduate">Fresh Graduate</option>
                                        <option value="Bekerja">Bekerja</option>
                                        <option value="Tidak Bekerja / Gap Year">Tidak Bekerja / Gap Year</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label id="label-pendidikan">Pendidikan Terakhir <span class="required">*</span></label>
                                    <select id="level" name="level" required>
                                        <option value="">-- Pilih --</option>
                                        <option value="SMA/SMK">SMA/SMK</option>
                                        <option value="D3">D3</option>
                                        <option value="S1">S1</option>
                                        <option value="S2">S2</option>
                                        <option value="S3">S3</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 2: PEKERJAAN -->
                        <div class="form-section" data-section="2">
                            <h2 class="section-title">Informasi Pekerjaan</h2>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-status_kerja">Saat Ini Bekerja? <span class="required">*</span></label>
                                    <div class="radio-group">
                                        <div class="radio-item">
                                            <input type="radio" id="kerja_ya" name="status_kerja" value="Ya" />
                                            <label for="kerja_ya" id="label-kerja_ya">Ya</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" id="kerja_tidak" name="status_kerja" value="Tidak" checked />
                                            <label for="kerja_tidak" id="label-kerja_tidak">Tidak</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group hidden-field" id="field_perusahaan">
                                    <label id="label-perusahaan">Nama Perusahaan/Institusi</label>
                                    <input type="text" name="perusahaan" id="input-perusahaan" />
                                </div>
                            </div>
                            <div class="form-row hidden-field" id="field_posisi">
                                <div class="form-group">
                                    <label id="label-posisi">Posisi/Jabatan</label>
                                    <input type="text" name="posisi" id="input-posisi" />
                                </div>
                                <div class="form-group">
                                    <label id="label-industri">Industri</label>
                                    <select name="industri" id="industri_select">
                                        <option value="">-- Pilih --</option>
                                        <option value="Pendidikan">Pendidikan</option>
                                        <option value="Teknologi">Teknologi</option>
                                        <option value="Keuangan">Keuangan</option>
                                        <option value="Manufaktur">Manufaktur</option>
                                        <option value="Healthcare">Healthcare</option>
                                        <option value="Government">Government</option>
                                        <option value="Lainnya">Lainnya</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 3: TUJUAN PROGRAM -->
                        <div class="form-section" data-section="3">
                            <h2 class="section-title">Tujuan Program</h2>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-tujuan_utama">Tujuan Utama Mengambil Kursus <span class="required">*</span></label>
                                    <div class="checkbox-group">
                                        <div class="checkbox-item">
                                            <input type="checkbox" id="tujuan1" name="tujuan" value="Pendidikan (Studi Luar/Dalam Negeri)" />
                                            <label for="tujuan1" id="label-tujuan1">Pendidikan (Studi Luar/Dalam Negeri)</label>
                                        </div>
                                        <div class="checkbox-item">
                                            <input type="checkbox" id="tujuan2" name="tujuan" value="Pekerjaan / Karier" />
                                            <label for="tujuan2" id="label-tujuan2">Pekerjaan / Karier</label>
                                        </div>
                                        <div class="checkbox-item">
                                            <input type="checkbox" id="tujuan3" name="tujuan" value="Migrasi" />
                                            <label for="tujuan3" id="label-tujuan3">Migrasi</label>
                                        </div>
                                        <div class="checkbox-item">
                                            <input type="checkbox" id="tujuan4" name="tujuan" value="Pengembangan Diri" />
                                            <label for="tujuan4" id="label-tujuan4">Pengembangan Diri</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-jenjang">Jenjang Pendidikan yang Ditargetkan</label>
                                    <select name="jenjang_pendidikan" id="jenjang_select">
                                        <option value="">-- Pilih --</option>
                                        <option value="S1">S1</option>
                                        <option value="S2">S2</option>
                                        <option value="S3">S3</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label id="label-program">Program Tes yang Ingin Dipersiapkan <span class="required">*</span></label>
                                    <select name="program" id="program_select" required>
                                        <option value="">-- Pilih --</option>
                                        <option value="IELTS">IELTS</option>
                                        <option value="SAT">SAT</option>
                                        <option value="GMAT">GMAT</option>
                                        <option value="GRE">GRE</option>
                                        <option value="TOEFL">TOEFL</option>
                                        <option value="TOEFL iBT">TOEFL iBT</option>
                                        <option value="PTE">PTE</option>
                                        <option value="IGCSE">IGCSE</option>
                                        <option value="TOEIC">TOEIC</option>
                                        <option value="GED">GED</option>
                                        <option value="A-Level">A-Level</option>
                                        <option value="AS-Level">AS-Level</option>
                                        <option value="O-Level">O-Level</option>
                                        <option value="IB">IB</option>
                                        <option value="LSAT">LSAT</option>
                                        <option value="UTBK">UTBK</option>
                                        <option value="Scholarship">Scholarship</option>
                                        <option value="Ausbildung">Ausbildung</option>
                                        <option value="General English">General English</option>
                                        <option value="Business English">Business English</option>
                                        <option value="BIPA">BIPA</option>
                                        <option value="JLPT">JLPT</option>
                                        <option value="HSK">HSK</option>
                                        <option value="TOPIK">TOPIK</option>
                                        <option value="DELF">DELF</option>
                                        <option value="TestDaF">TestDaF</option>
                                        <option value="Duolingo">Duolingo</option>
                                        <option value="Belum Tahu">Belum Tahu / Butuh Konsultasi</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-tes_tambahan">Butuh Tes Lain Selain Tes Utama?</label>
                                    <select name="tes_tambahan" id="tes_tambahan_select">
                                        <option value="">-- Pilih --</option>
                                        <option value="Ya">Ya</option>
                                        <option value="Tidak">Tidak</option>
                                        <option value="Belum Yakin">Belum Yakin</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label id="label-rencana_tes">Kapan Rencana Mengambil Tes Resmi?</label>
                                    <input type="date" name="rencana_tes" id="input-rencana_tes" />
                                </div>
                            </div>
                            <div class="form-row hidden-field" id="field_tes_tambahan">
                                <div class="form-group">
                                    <label>Pilih Tes Tambahan</label>
                                    <select name="tes_tambahan_detail" multiple size="5">
                                        <option value="IELTS">IELTS</option>
                                        <option value="SAT">SAT</option>
                                        <option value="GMAT">GMAT</option>
                                        <option value="GRE">GRE</option>
                                        <option value="TOEFL">TOEFL</option>
                                        <option value="TOEFL iBT">TOEFL iBT</option>
                                        <option value="PTE">PTE</option>
                                        <option value="IGCSE">IGCSE</option>
                                        <option value="TOEIC">TOEIC</option>
                                        <option value="GED">GED</option>
                                        <option value="A-Level">A-Level</option>
                                        <option value="AS-Level">AS-Level</option>
                                        <option value="O-Level">O-Level</option>
                                        <option value="IB">IB</option>
                                        <option value="LSAT">LSAT</option>
                                        <option value="UTBK">UTBK</option>
                                        <option value="Scholarship">Scholarship</option>
                                        <option value="Ausbildung">Ausbildung</option>
                                        <option value="General English">General English</option>
                                        <option value="Business English">Business English</option>
                                        <option value="BIPA">BIPA</option>
                                        <option value="JLPT">JLPT</option>
                                        <option value="HSK">HSK</option>
                                        <option value="TOPIK">TOPIK</option>
                                        <option value="DELF">DELF</option>
                                        <option value="TestDaF">TestDaF</option>
                                        <option value="Duolingo">Duolingo</option>
                                    </select>
                                    <small style="color: #666; font-size: 12px;">Tekan Ctrl untuk memilih multiple tes</small>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-target_skor">Target Skor yang Ingin Dicapai</label>
                                    <input type="text" name="target_skor" id="input-target_skor" placeholder="Contoh: 7.5 (IELTS), 100 (TOEFL)" />
                                </div>
                                <div class="form-group">
                                    <label id="label-skor_awal">Skor Awal (jika ada)</label>
                                    <input type="number" name="skor_awal" id="input-skor_awal" step="0.1" />
                                </div>
                            </div>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-kendala">Kendala Utama Anda Saat Ini</label>
                                    <div class="checkbox-group">
                                        <div class="checkbox-item"><input type="checkbox" id="kendala1" name="kendala" value="Speaking" /><label for="kendala1" id="label-kendala1">Speaking</label></div>
                                        <div class="checkbox-item"><input type="checkbox" id="kendala2" name="kendala" value="Writing" /><label for="kendala2" id="label-kendala2">Writing</label></div>
                                        <div class="checkbox-item"><input type="checkbox" id="kendala3" name="kendala" value="Reading" /><label for="kendala3" id="label-kendala3">Reading</label></div>
                                        <div class="checkbox-item"><input type="checkbox" id="kendala4" name="kendala" value="Listening" /><label for="kendala4" id="label-kendala4">Listening</label></div>
                                        <div class="checkbox-item"><input type="checkbox" id="kendala5" name="kendala" value="Grammar" /><label for="kendala5" id="label-kendala5">Grammar</label></div>
                                        <div class="checkbox-item"><input type="checkbox" id="kendala6" name="kendala" value="Konsistensi belajar" /><label for="kendala6" id="label-kendala6">Konsistensi Belajar</label></div>
                                        <div class="checkbox-item"><input type="checkbox" id="kendala9" name="kendala" value="Lain lain" /><label for="kendala9" id="label-kendala9">Lain lain</label></div>
                                        <div class="checkbox-item" id="kendala_lain_wrapper" style="margin-left: 20px;">
                                            <input type="text" id="kendala_lain_input" name="kendala" class="hidden-field" disabled placeholder="Jelaskan kendala (opsional)" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 4: INFO STUDI / PEKERJAAN LANJUTAN -->
                        <div class="form-section" data-section="4">
                            <h2 class="section-title">Informasi Studi/Pekerjaan Lanjutan</h2>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-negara_studi">Negara Tujuan Studi</label>
                                    <select id="negara_studi_select">
                                        <option value="">-- Pilih Negara --</option>
                                    </select>
                                    <input type="text" id="negara_studi_other" class="hidden-field" placeholder="Masukkan negara lain..." />
                                    <input type="hidden" name="negara_studi" id="negara_studi_input" />
                                </div>
                                <div class="form-group">
                                    <label id="label-universitas">Universitas Target (jika sudah ada)</label>
                                    <select id="universitas_select">
                                        <option value="">-- Pilih Universitas --</option>
                                    </select>
                                    <input type="text" id="universitas_target_other" class="hidden-field" placeholder="Masukkan universitas..." />
                                    <input type="hidden" name="universitas_target" id="universitas_target_input" />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-program_studi">Program Studi Target</label>
                                    <input type="text" name="program_studi" id="input-program_studi" />
                                </div>
                                <div class="form-group">
                                    <label id="label-intake">Perkiraan Intake</label>
                                    <select name="intake" id="intake_select">
                                        <option value="">-- Pilih --</option>
                                        <option value="Jan–Mar">Januari - Maret</option>
                                        <option value="Apr–Jun">April - Juni</option>
                                        <option value="Jul–Sep">Juli - September</option>
                                        <option value="Oct–Dec">Oktober - Desember</option>
                                        <option value="Belum Pasti">Belum Pasti</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-negara_kerja">Negara Tujuan Bekerja</label>
                                    <input type="text" name="negara_kerja" id="input-negara_kerja" />
                                </div>
                                <div class="form-group">
                                    <label id="label-bidang_industri_target">Bidang/Industri Target</label>
                                    <input type="text" name="bidang_industri_target" id="input-bidang_industri_target" />
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 5: PREFERENSI KELAS & EKSPEKTASI -->
                        <div class="form-section" data-section="5">
                            <h2 class="section-title">Preferensi & Ekspektasi</h2>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-jadwal">Preferensi Kelas <span class="required">*</span></label>
                                    <select name="jadwal" id="jadwal_select" required>
                                        <option value="">-- Pilih --</option>
                                        <option value="Private">Private</option>
                                        <option value="Semi-private">Semi-private</option>
                                        <option value="Group">Group</option>
                                        <option value="Paket">Paket</option>
                                    </select>
                                </div>
                                <div class="form-group hidden-field" id="field_program_level">
                                    <label id="label-program_level">Tingkat Program <span class="required">*</span></label>
                                    <select name="program_level" id="program_level_select" required>
                                        <option value="">-- Pilih Kelas Terlebih Dahulu --</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-program_intensif">Bersedia Program Intensif? <span class="required">*</span></label>
                                    <select name="program_intensif" id="program_intensif_select" required>
                                        <option value="">-- Pilih --</option>
                                        <option value="Ya">Ya</option>
                                        <option value="Tidak">Tidak</option>
                                        <option value="Tergantung rekomendasi tutor">Tergantung Rekomendasi Tutor</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-alasan_memilih">Alasan Memilih Ultimate Education</label>
                                    <textarea name="alasan_memilih" id="input-alasan_memilih"></textarea>
                                </div>
                            </div>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-ekspektasi">Ekspektasi Anda Setelah Mengikuti Program Ini</label>
                                    <textarea name="ekspektasi" id="input-ekspektasi"></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label id="label-advisor">Bersedia Dihubungi Tim Academic Advisor?</label>
                                    <div class="radio-group">
                                        <div class="radio-item"><input type="radio" id="advisor_ya" name="screening" value="Ya" checked /><label for="advisor_ya" id="label-advisor_ya">Ya</label></div>
                                        <div class="radio-item"><input type="radio" id="advisor_tidak" name="screening" value="Tidak" /><label for="advisor_tidak" id="label-advisor_tidak">Tidak</label></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label id="label-kursus_sebelumnya">Pernah Kursus Persiapan Sebelumnya?</label>
                                    <div class="radio-group">
                                        <div class="radio-item"><input type="radio" id="kursus_ya" name="kursus_sebelumnya" value="Ya" /><label for="kursus_ya" id="label-kursus_ya">Ya</label></div>
                                        <div class="radio-item"><input type="radio" id="kursus_tidak" name="kursus_sebelumnya" value="Tidak" checked /><label for="kursus_tidak" id="label-kursus_tidak">Tidak</label></div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row full hidden-field" id="field_kursus_sebelumnya">
                                <div class="form-group">
                                    <label id="label-kursus_detail">Tes Apa & Skor Terakhir (jika ada)</label>
                                    <input type="text" name="kursus_sebelumnya_detail" id="input-kursus_sebelumnya_detail" />
                                </div>
                            </div>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-catatan">Catatan Tambahan</label>
                                    <textarea name="catatan" id="input-catatan"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 6: PEMBAYARAN DAN LMS -->
                        <div class="form-section" data-section="6">
                            <h2 class="section-title">Pembayaran & Akses LMS</h2>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-bukti_pembayaran">Upload Bukti Pembayaran <span class="required">*</span></label>
                                    <div id="dropzone" class="upload-dropzone">
                                        <input type="file" name="bukti_pembayaran" id="bukti_pembayaran" accept="image/*,.pdf" required hidden />
                                        <div class="dropzone-inner" id="dropzone_inner">
                                            <p><strong id="dropzone_strong">Drag & drop di sini</strong> <span id="dropzone_or">atau</span> <button type="button" id="chooseFileBtn" class="link-button">Pilih File</button></p>
                                            <p class="dropzone-hint">Format: JPG, PNG, atau PDF. Maksimal 5MB</p>
                                        </div>
                                        <div class="file-info" id="bukti_file_info" style="display:none;">
                                            <p id="bukti_file_name"></p>
                                            <div style="display:flex;gap:8px;align-items:center;">
                                                <button type="button" id="preview_bukti_btn" class="link-button">Lihat</button>
                                                <button type="button" id="remove_bukti_btn" class="link-button">Hapus</button>
                                            </div>
                                        </div>
                                        <div class="dropzone-error" id="bukti_error" style="display:none;color:#e74c3c;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row full">
                                <div class="form-group">
                                    <label id="label-lms_username">Username untuk LMS <span class="required">*</span></label>
                                    <input type="text" name="lms_username" id="lms_username" required />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group lms-credentials">
                                    <label id="label-lms_password">Password untuk LMS <span class="required">*</span></label>
                                    <div class="password-wrapper">
                                        <input type="password" name="lms_password" id="lms_password" required />
                                        <button type="button" id="togglePassword" class="password-toggle">Show</button>
                                    </div>
                                    <div class="password-meter" id="password_meter">
                                        <div class="password-meter-bar" id="password_meter_bar"></div>
                                    </div>
                                </div>
                                <div class="form-group lms-credentials">
                                    <label id="label-lms_password_confirm">Konfirmasi Password LMS <span class="required">*</span></label>
                                    <div class="password-wrapper">
                                        <input type="password" name="lms_password_confirm" id="lms_password_confirm" required />
                                        <button type="button" id="togglePasswordConfirm" class="password-toggle">Show</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-prev" id="btnPrev" style="display: none;">← Sebelumnya</button>
                            <button type="button" class="btn-next" id="btnNext">Lanjut →</button>
                            <button type="submit" class="btn-submit" id="btnSubmit" style="display: none;">Kirim Pendaftaran</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Toast container -->
            <div id="toast-container"></div>

            <style>
                /* CSS stays largely the same as provided */
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
                body {
                    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                    background: #f5f5f5;
                    min-height: 100vh;
                    padding: 20px;
                }
                .container {
                    max-width: 900px;
                    margin: 0 auto;
                    background: white;
                    border-radius: 10px;
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
                    overflow: hidden;
                }
                .form-header {
                    background: #ffffff;
                    color: #333;
                    padding: 30px;
                    text-align: center;
                    border-bottom: 2px solid #e0e0e0;
                }
                .form-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                }
                .form-body {
                    padding: 30px;
                }
                .progress-bar {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 30px;
                    align-items: center;
                }
                .progress-step {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    flex: 1;
                    position: relative;
                }
                .progress-step:not(:last-child)::after {
                    content: "";
                    position: absolute;
                    top: 20px;
                    left: 50%;
                    width: 100%;
                    height: 2px;
                    background: #e0e0e0;
                    z-index: -1;
                }
                .progress-step.active:not(:last-child)::after {
                    background: #145da0;
                }
                .progress-circle {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    background: #e0e0e0;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 600;
                    color: #666;
                    margin-bottom: 8px;
                }
                .progress-step.active .progress-circle,
                .progress-step.completed .progress-circle {
                    background: #145da0;
                    color: white;
                }
                .progress-label {
                    font-size: 12px;
                    color: #666;
                    text-align: center;
                }
                .progress-step.active .progress-label {
                    color: #145da0;
                    font-weight: 600;
                }
                .form-section {
                    display: none;
                    animation: fadeIn 0.3s ease-in;
                }
                .form-section.active {
                    display: block;
                }
                @keyframes fadeIn {
                    from {
                        opacity: 0;
                    }
                    to {
                        opacity: 1;
                    }
                }
                .section-title {
                    font-size: 18px;
                    font-weight: 600;
                    color: #333;
                    margin-bottom: 20px;
                    padding-bottom: 10px;
                    border-bottom: 2px solid #145da0;
                }
                .form-row {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 20px;
                    margin-bottom: 20px;
                }
                .form-row.full {
                    grid-template-columns: 1fr;
                }
                .form-group {
                    display: flex;
                    flex-direction: column;
                }
                label {
                    font-weight: 600;
                    color: #333;
                    margin-bottom: 8px;
                    font-size: 14px;
                }
                label .required {
                    color: #e74c3c;
                }
                input,
                select,
                textarea {
                    padding: 12px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 14px;
                    font-family: inherit;
                    width: 100%;
                }
                input:focus,
                select:focus,
                textarea:focus {
                    outline: none;
                    border-color: #145da0;
                    box-shadow: 0 0 0 3px rgba(20, 93, 160, 0.1);
                }
                .hidden-field {
                    display: none !important;
                }
                .form-actions {
                    display: flex;
                    gap: 10px;
                    margin-top: 30px;
                    border-top: 1px solid #ddd;
                    padding-top: 20px;
                }
                button {
                    padding: 12px 30px;
                    font-weight: 600;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    transition: all 0.3s;
                }
                .btn-next,
                .btn-submit {
                    background: #145da0;
                    color: white;
                    flex: 1;
                }
                .btn-prev {
                    background: #ecf0f1;
                    color: #333;
                    flex: 1;
                }
                .upload-dropzone {
                    border: 2px dashed #d0d7df;
                    padding: 18px;
                    text-align: center;
                    background: #fbfcfd;
                    border-radius: 8px;
                }
                .upload-dropzone.dragover {
                    border-color: #145da0;
                    background: #f0f6ff;
                }
                .password-wrapper {
                    display: flex;
                    gap: 8px;
                    align-items: center;
                }
                .password-meter {
                    height: 8px;
                    background: #eee;
                    border-radius: 4px;
                    margin-top: 8px;
                }
                .password-meter-bar {
                    height: 100%;
                    width: 0;
                    transition: width 0.3s;
                    border-radius: 4px;
                }
                .link-button {
                    background: none;
                    border: none;
                    color: #145da0;
                    cursor: pointer;
                    padding: 0;
                    text-decoration: underline;
                    width: auto;
                    font-size: 14px;
                }

                /* Flag toggle css */
                .toggle {
                    position: relative;
                    height: 42px;
                    display: flex;
                    align-items: center;
                }
                .toggle input {
                    position: absolute;
                    opacity: 0;
                    width: 100%;
                    height: 100%;
                    cursor: pointer;
                    z-index: 5;
                }
                .toggle label {
                    display: flex;
                    width: 110px;
                    height: 100%;
                    align-items: center;
                    justify-content: space-between;
                    border-radius: 30px;
                    cursor: pointer;
                }
                .toggle label .flag {
                    width: 42px;
                    height: 42px;
                    opacity: 0.5;
                    transition: 0.2s;
                }
                .toggle input:not(:checked) + label .flag.left {
                    opacity: 1;
                }
                .toggle input:checked + label .flag.right {
                    opacity: 1;
                }
                .flag:hover {
                    transform: scale(1.1);
                }

                /* Toast notifications */
                #toast-container {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 9999;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                .toast {
                    padding: 12px 20px;
                    border-radius: 8px;
                    color: white;
                    opacity: 0;
                    transform: translateX(50px);
                    transition: 0.3s;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    min-width: 250px;
                }
                .toast.show {
                    opacity: 1;
                    transform: translateX(0);
                }
                .toast.error {
                    background: #e74c3c;
                }
                .toast.success {
                    background: #2ecc71;
                }
                .toast .close {
                    background: none;
                    color: white;
                    font-size: 20px;
                    padding: 0;
                    margin-left: 10px;
                    text-decoration: none;
                }

                .loading {
                    display: none;
                    text-align: center;
                    padding: 20px;
                }
                .spinner {
                    border: 4px solid #f3f3f3;
                    border-top: 4px solid #145da0;
                    border-radius: 50%;
                    width: 30px;
                    height: 30px;
                    animation: spin 1s linear infinite;
                    margin: 0 auto 10px;
                }
                @keyframes spin {
                    0% {
                        transform: rotate(0deg);
                    }
                    100% {
                        transform: rotate(360deg);
                    }
                }
                .message {
                    display: none;
                    padding: 15px;
                    border-radius: 5px;
                    margin-bottom: 20px;
                }
                .message.success {
                    background: #d4edda;
                    color: #155724;
                    border: 1px solid #c3e6cb;
                }
                .message.error {
                    background: #f8d7da;
                    color: #721c24;
                    border: 1px solid #f5c6cb;
                }

                @media (max-width: 768px) {
                    .form-row {
                        grid-template-columns: 1fr;
                    }
                    .form-actions {
                        flex-direction: column;
                    }
                }
            </style>

            <script is:inline>
                // Logika JavaScript (Copy dari HTML sebelumnya, pastikan tetap valid)
                // [Dictionary langDict, Supabase init, Form Logic, dll...]
                // Saya menyertakan struktur ringkas untuk dipasang di sini.

                const langDict = {
                    /* ... dictionary data ... */
                };
                // (Isi langDict Anda tetap sama persis dengan yang ada di file HTML)

                const SUPABASE_URL = "https://rbivamtmcadfnemqcvac.supabase.co";
                const SUPABASE_KEY =
                    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJiaXZhbXRtY2FkZm5lbXFjdmFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4MTU2MjgsImV4cCI6MjA4MTM5MTYyOH0.hZTprt4i3Y896uY_7m-lz-8T01lAArfj7hBIxw1utnc";

                let currentLang = "id";
                let currentSection = 1;

                // Semua fungsi pendukung (setLanguage, showToast, loadProvinces, dsb)
                // disalin ke sini agar komponen Astro bisa berjalan di browser.

                document.addEventListener("DOMContentLoaded", () => {
                    // Inisialisasi Event Listeners
                    initApp();
                });

                function initApp() {
                    // Logika inisialisasi aplikasi Anda
                    // [Seluruh isi script dari HTML asal Anda masuk ke sini]
                    console.log("Application Initialized");

                    // Contoh implementasi tombol lanjut
                    document.getElementById("btnNext").addEventListener("click", () => {
                        // Logika validasi dan ganti section
                        if (currentSection < 6) {
                            currentSection++;
                            updateUI();
                        }
                    });

                    document.getElementById("btnPrev").addEventListener("click", () => {
                        if (currentSection > 1) {
                            currentSection--;
                            updateUI();
                        }
                    });
                }

                function updateUI() {
                    document.querySelectorAll(".form-section").forEach((s) => s.classList.remove("active"));
                    document.querySelector(`[data-section="${currentSection}"]`).classList.add("active");

                    // Tombol tampil/sembunyi
                    document.getElementById("btnPrev").style.display = currentSection === 1 ? "none" : "block";
                    document.getElementById("btnNext").style.display = currentSection === 6 ? "none" : "block";
                    document.getElementById("btnSubmit").style.display = currentSection === 6 ? "block" : "none";
                }

                // ... (Sisa fungsi sanitasi, validasi, dan integrasi supabase Anda tetap sama)
            </script>
</layout>