---
import Layout from "../../layouts/Layout.astro";
import UnifiedHero from "../../components/common/UnifiedHero.astro";
import ProgramOverview from "../../components/program/detail/ProgramOverview.astro";
import ProgramPricingTabs from "../../components/program/detail/ProgramPricingTabs.jsx";
import InteractiveCalendar from "../../components/program/detail/InteractiveCalendar.jsx";
import HomeSuccessCTA from "../../components/home/HomeSuccessCTA.astro";
import PaymentRoadmap from "../../components/program/detail/PaymentRoadmap.jsx";
import ProgramWhyUs from "../../components/program/detail/ProgramWhyUs.astro";
import ProgramAlumni from "../../components/program/detail/ProgramAlumni.astro";
import ProgramFAQ from "../../components/program/detail/ProgramFAQ.astro";
import WhyChooseUs from "@/components/home/WhyChooseUs.astro";
import { programs } from "../../data/programs";

export async function getStaticPaths() {
  return programs.map((program) => ({
    params: { slug: program.slug },
    props: { program },
  }));
}

const { program } = Astro.props;
---

<Layout title={program.meta.title} description={program.meta.description}>
  <main>
    <!-- 1. Hero -->
    <UnifiedHero title={program.hero.title} subtitle={program.hero.subtitle} pillText={program.hero.pillText} image={program.hero.image} />

    <!-- 2. Gambaran Kursus -->
    <ProgramOverview title={program.overview.title} content={program.overview.content} />

    <!-- 3. Topik & Pricing Tabs -->
    <ProgramPricingTabs client:load data={program.pricing} programSlug={program.slug} />

    <!-- 4. Jadwal Kelas -->
    {['ielts','gre','gmat','sat'].includes(program.slug) && (
      <InteractiveCalendar programSlug={program.slug} />
    )}

    <!-- 6. Alur Pembayaran -->
    <PaymentRoadmap client:load />

    <!-- 7. Kenapa Kami? (Generic for all programs, or specific if needed) -->
    <!-- Note: WhyChooseUs is the global homepage component. ProgramWhyUs is the specific one. -->
    <WhyChooseUs />

    <!-- 5. Success CTA -->
    <HomeSuccessCTA />
    <!-- 8. Cerita Alumni -->
    <ProgramAlumni title={program.alumni.title} subtitle={program.alumni.subtitle} items={program.alumni.items} />

    <!-- 9. FAQ -->
    <ProgramFAQ items={program.faq.items} />
  </main>
</Layout>
